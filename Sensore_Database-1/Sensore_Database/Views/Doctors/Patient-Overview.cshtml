@model PatientOverviewViewModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Profile</title>
    <link rel="stylesheet" href="style.css">

</head>
<body>
<!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <img src="https://framerusercontent.com/images/pL2vwGqbZlaEGRev1OpCd6aKRk.png?width=1031&height=316" alt="Sensore by Graphene Trace">
        </div>

        <nav>
            <a class="nav-item active" >Patient Overview</a>
            <a class="nav-item" asp-area="" asp-controller="Patients" asp-action="DoctorNotes">Doctorâ€™s Notes</a>
        </nav>

        <div class="bottom-links">
            <a class="nav-item" asp-area="" asp-controller="Home" asp-action="Index">Log Out</a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="content">

        <div class="top-bar"></div>

            <h1 class="page-title">Patient Overview</h1>

        <div class="card">
            <!-- Patient Info Section -->
            <section class="patient-info">

                <div>
                    <h2>@Model.Patient.FirstName, @Model.Patient.LastName</h2>
                    <p>@Model.Patient.DateOfBirth</p>

                    <div class="status-box">
                        <font size = 4><strong>Current Status</strong><br> </font>
                        <b>Doctor: @Model.Patient.PrimaryDoctor</b><br>
                        <button class="alert-btn"><b>Alert History</b></button>
                    </div>

                    <div class="details-grid">
                        <div><strong>Patient ID</strong><br>@Model.Patient.Id</div>
                        <div><strong>Phone</strong><br>@Model.Patient.PhoneNumber</div>
                        <div><strong>Address</strong><br>@Model.Patient.Address</div>
                        <div><strong>Email</strong><br>@Model.Patient.Email</div>
                    </div>
                </div>
            </section>
<!-- Heatmap Display -->
@if (Model.SensorFrames != null && Model.SensorFrames.Count > 0)
{
    <h2>Sensor Heatmap</h2>
    var frame = Model.SensorFrames[0];

    <div class="heatmap">
        @for (int r = 0; r < 32; r++)
        {
            for (int c = 0; c < 32; c++)
            {
                int value = frame[r, c];
                string color = $"rgb({value}, 0, {255 - value})";

                <div class="cell" style="background-color:@color"></div>
            }
        }
    </div>
}
else
{
    <p>No sensor data available for this patient.</p>
}

<style>
    .heatmap {
        display: grid;
        grid-template-columns: repeat(32, 12px);
        grid-template-rows: repeat(32, 12px);
        gap: 1px;
        margin-top: 20px;
        border: 1px solid #ddd;
        width: fit-content;
    }

    .cell {
        width: 12px;
        height: 12px;
    }
</style>
</body>
</html>